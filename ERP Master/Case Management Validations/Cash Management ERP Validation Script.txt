Cash Management ERP Validation Script


Case Categories---


UPDATE PWC_E_CASECATEGORIES
	SET ERRORDESC = CONCAT(ERRORDESC,'CASECATEGORY is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASECATEGORIES 	
	WHERE 
		CASECATEGORY= '' or CASECATEGORY is null

UPDATE PWC_E_CASECATEGORIES
	SET ERRORDESC = CONCAT(ERRORDESC,'CATEGORYTYPE is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASECATEGORIES 	
	WHERE 
		CATEGORYTYPE= '' or CATEGORYTYPE is null


UPDATE PWC_E_CASECATEGORIES
	SET ERRORDESC = CONCAT(ERRORDESC,'Either PARENTCASECATEGORYNAME or PARENTCASECATEGORYTYPE is populated. However, either both should be filled or none','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASECATEGORIES 	
	WHERE 
		((PARENTCASECATEGORYNAME= '' or PARENTCASECATEGORYNAME is null) and PARENTCASECATEGORYTYPE is not NULL) OR ((PARENTCASECATEGORYTYPE= '' or PARENTCASECATEGORYTYPE is null) and PARENTCASECATEGORYNAME is not NULL)

 UPDATE PWC_E_CASECATEGORIES 
	SET ERRORDESC = CONCAT(ERRORDESC,'CASECATEGORY,CATEGORYTYPE,DATAAREAID has duplicate values','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Constraint', '; ')
	FROM PWC_E_CASECATEGORIES	
	WHERE 
		CASECATEGORY IS NOT NULL AND CATEGORYTYPE IS NOT NULL AND DATAAREAID IS NOT NULL AND CONCAT(CASECATEGORY,CATEGORYTYPE,DATAAREAID) IN 
		(SELECT CONCAT(CASECATEGORY,CATEGORYTYPE,DATAAREAID) FROM PWC_E_CASECATEGORIES
		GROUP BY CASECATEGORY,CATEGORYTYPE,DATAAREAID HAVING COUNT(*)>1)

 UPDATE PWC_E_CASECATEGORIES
	SET ERRORDESC = CONCAT(ERRORDESC,'CATEGORYTYPE has invalid enum values','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASECATEGORIES	
	WHERE 
		CATEGORYTYPE IS NOT NULL AND CATEGORYTYPE NOT IN
		(SELECT MEMBERNAME FROM RETAILENUMVALUETABLE WHERE ENUMNAME LIKE 'CaseCategoryType')

 UPDATE PWC_E_CASECATEGORIES
	SET ERRORDESC = CONCAT(ERRORDESC,'DEFAULTACTIVITYCATEGORY has invalid enum values','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASECATEGORIES	
	WHERE 
		DEFAULTACTIVITYCATEGORY IS NOT NULL AND DEFAULTACTIVITYCATEGORY NOT IN
		(SELECT MEMBERNAME FROM RETAILENUMVALUETABLE WHERE ENUMNAME LIKE 'smmActivityCategory')

 UPDATE PWC_E_CASECATEGORIES
	SET ERRORDESC = CONCAT(ERRORDESC,'PARENTCASECATEGORYTYPE has invalid enum values','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASECATEGORIES
	WHERE 
		PARENTCASECATEGORYTYPE IS NOT NULL AND PARENTCASECATEGORYTYPE NOT IN
		(SELECT MEMBERNAME FROM RETAILENUMVALUETABLE WHERE ENUMNAME LIKE 'CaseCategoryType')

UPDATE PWC_E_CASECATEGORIES
	SET ERRORDESC = CONCAT(ERRORDESC,'PROCESS is not in NAME of Case Hierarchy','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASECATEGORIES A
	WHERE
		PROCESS IS NOT NULL AND PROCESS NOT IN 
		(SELECT B.NAME FROM PWC_E_CASEHIERARCHY B WHERE (B.DATAAREAID = A.DATAAREAID OR UPPER(B.DATAAREAID) = 'GLOBAL') AND B.NAME IS NOT NULL)

UPDATE PWC_E_CASECATEGORIES
	SET ERRORDESC = CONCAT(ERRORDESC,'SERVICELEVELAGREEMENTID is not in AGREEMENTID of Service level agreement','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASECATEGORIES A
	WHERE
		SERVICELEVELAGREEMENTID IS NOT NULL AND SERVICELEVELAGREEMENTID NOT IN 
		(SELECT B.AGREEMENTID FROM PWC_E_SERVICELEVELAGGR B WHERE (B.DATAAREAID = A.DATAAREAID OR UPPER(B.DATAAREAID) = 'GLOBAL') AND B.AGREEMENTID IS NOT NULL)

UPDATE PWC_E_CASECATEGORIES
	SET ERRORDESC = CONCAT(ERRORDESC,'DEFAULTOWNERWORKERPERSONNELNUMBER is not in PERSONNELNUMBER of Employee Master','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASECATEGORIES A
	WHERE
		DEFAULTOWNERWORKERPERSONNELNUMBER IS NOT NULL AND DEFAULTOWNERWORKERPERSONNELNUMBER NOT IN 
		(SELECT B.PERSONNELNUMBER FROM PWC_E_EMPLOYEE B WHERE (B.DATAAREAID = A.DATAAREAID OR UPPER(B.DATAAREAID) = 'GLOBAL') AND B.PERSONNELNUMBER IS NOT NULL)

UPDATE PWC_E_CASECATEGORIES
	SET ERRORDESC = CONCAT(ERRORDESC,'DEFAULTOWNERDEPARTMENTNUMBER is not in OPERATINGUNITNUMBER of Department','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASECATEGORIES A
	WHERE
		DEFAULTOWNERDEPARTMENTNUMBER IS NOT NULL AND DEFAULTOWNERDEPARTMENTNUMBER NOT IN 
		(SELECT B.OPERATINGUNITNUMBER FROM PWC_E_DEPARTMENT B WHERE (B.DATAAREAID = A.DATAAREAID OR UPPER(B.DATAAREAID) = 'GLOBAL') AND B.OPERATINGUNITNUMBER IS NOT NULL)

UPDATE PWC_E_CASECATEGORIES
	SET ERRORDESC = CONCAT(ERRORDESC,'PARENTCASECATEGORYNAME is not in CASECATEGORY of Case categories','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASECATEGORIES A
	WHERE
		PARENTCASECATEGORYNAME IS NOT NULL AND PARENTCASECATEGORYNAME NOT IN 
		(SELECT B.CASECATEGORY FROM PWC_E_CASECATEGORIES B WHERE (B.DATAAREAID = A.DATAAREAID OR UPPER(B.DATAAREAID) = 'GLOBAL') AND B.CASECATEGORY IS NOT NULL)




Service Level Agreement---


UPDATE PWC_E_SERVICELEVELAGGR
	SET ERRORDESC = CONCAT(ERRORDESC,'AGREEMENTID is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_SERVICELEVELAGGR	
	WHERE 
		AGREEMENTID= '' or AGREEMENTID is null

 UPDATE PWC_E_SERVICELEVELAGGR 
	SET ERRORDESC = CONCAT(ERRORDESC,'AGREEMENTID,DATAAREAID has duplicate values','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Constraint', '; ')
	FROM PWC_E_SERVICELEVELAGGR	
	WHERE 
		AGREEMENTID IS NOT NULL AND DATAAREAID IS NOT NULL AND CONCAT(AGREEMENTID,DATAAREAID) IN 
		(SELECT CONCAT(AGREEMENTID,DATAAREAID) FROM PWC_E_SERVICELEVELAGGR
		GROUP BY AGREEMENTID,DATAAREAID HAVING COUNT(*)>1)

UPDATE PWC_E_SERVICELEVELAGGR
	SET ERRORDESC = CONCAT(ERRORDESC,'AGREEMENTWORKCALENDARID is not in CALENDARID of Calendar','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_SERVICELEVELAGGR A
	WHERE
		AGREEMENTWORKCALENDARID IS NOT NULL AND AGREEMENTWORKCALENDARID NOT IN 
		(SELECT B.CALENDARID FROM PWC_E_PRODCALENDAR B WHERE (B.DATAAREAID = A.DATAAREAID OR UPPER(B.DATAAREAID) = 'GLOBAL') AND B.CALENDARID IS NOT NULL)


UPDATE PWC_E_SERVICELEVELAGGR
	SET ERRORDESC2 = CONCAT(ERRORDESC2,'SERVICEREQUESTRESPONSEDAYS is not an integer','; ')
	,ERRORSTATUS2 = CONCAT(ERRORSTATUS2, 'Constraint', '; ')
	FROM PWC_E_SERVICELEVELAGGR
	WHERE
		SERVICEREQUESTRESPONSEDAYS LIKE '%[^0-9]%'


Case Hierarchy---

UPDATE PWC_E_CASEHIERARCHY
	SET ERRORDESC = CONCAT(ERRORDESC,'NAME is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASEHIERARCHY	
	WHERE 
		NAME= '' or NAME is null

UPDATE PWC_E_CASEHIERARCHY
	SET ERRORDESC = CONCAT(ERRORDESC,'HIERARCHYID is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_CASEHIERARCHY	
	WHERE 
		HIERARCHYID= '' or HIERARCHYID is null


 UPDATE PWC_E_CASEHIERARCHY 
	SET ERRORDESC = CONCAT(ERRORDESC,'HIERARCHYID,DATAAREAID has duplicate values','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Constraint', '; ')
	FROM PWC_E_CASEHIERARCHY	
	WHERE 
		HIERARCHYID IS NOT NULL AND DATAAREAID IS NOT NULL AND CONCAT(AGREEMENTID,DATAAREAID) IN 
		(SELECT CONCAT(HIERARCHYID,DATAAREAID) FROM PWC_E_CASEHIERARCHY
		GROUP BY HIERARCHYID,DATAAREAID HAVING COUNT(*)>1)




Sales Role Responsibilities---

UPDATE PWC_E_SALESROLERESP
	SET ERRORDESC = CONCAT(ERRORDESC,'RESPONSIBILITYCODE is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_SALESROLERESP	
	WHERE 
		RESPONSIBILITYCODE= '' or RESPONSIBILITYCODE is null

 UPDATE PWC_E_SALESROLERESP 
	SET ERRORDESC = CONCAT(ERRORDESC,'RESPONSIBILITYCODE,DATAAREAID has duplicate values','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Constraint', '; ')
	FROM PWC_E_SALESROLERESP	
	WHERE 
		RESPONSIBILITYCODE IS NOT NULL AND DATAAREAID IS NOT NULL AND CONCAT(RESPONSIBILITYCODE,DATAAREAID) IN 
		(SELECT CONCAT(RESPONSIBILITYCODE,DATAAREAID) FROM PWC_E_SALESROLERESP
		GROUP BY RESPONSIBILITYCODE,DATAAREAID HAVING COUNT(*)>1)