Product Attributes ERP Validation Script


Product Attribute Enumeration Type---

UPDATE PWC_E_PRODATTRENUMTYPE
	SET ERRORDESC = CONCAT(ERRORDESC,'ENUMERATIONNAME is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODATTRENUMTYPE
	WHERE 
		ENUMERATIONNAME= '' or ENUMERATIONNAME is null


UPDATE PWC_E_PRODATTRENUMTYPE
	SET ERRORDESC = CONCAT(ERRORDESC,'ENUMERATIONVALUE is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODATTRENUMTYPE
	WHERE 
		ENUMERATIONVALUE= '' or ENUMERATIONVALUE is null


UPDATE PWC_E_PRODATTRENUMTYPE
	SET ERRORDESC = CONCAT(ERRORDESC,'ENUMERATIONNAMEUNIQUEID is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Warning', '; ')
	FROM PWC_E_PRODATTRENUMTYPE
	WHERE 
		ENUMERATIONNAMEUNIQUEID= '' or ENUMERATIONNAMEUNIQUEID is null


UPDATE PWC_E_PRODATTRENUMTYPE 
	SET ERRORDESC = CONCAT(ERRORDESC,'ENUMERATIONNAME,ENUMERATIONNAMEUNIQUEID,DATAAREAID has duplicate values','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Constraint', '; ')
	FROM PWC_E_PRODATTRENUMTYPE
	WHERE 
		ENUMERATIONNAME IS NOT NULL AND ENUMERATIONNAMEUNIQUEID IS NOT NULL AND DATAAREAID IS NOT NULL AND
		CONCAT(ENUMERATIONNAME,ENUMERATIONNAMEUNIQUEID,DATAAREAID) IN 
		(SELECT CONCAT(ENUMERATIONNAME,ENUMERATIONNAMEUNIQUEID,DATAAREAID) FROM PWC_E_PRODATTRENUMTYPE
		GROUP BY ENUMERATIONNAME,ENUMERATIONNAMEUNIQUEID,DATAAREAID HAVING COUNT(*)>1)





Attribute Group----

UPDATE PWC_E_PRODATTRGRP
	SET ERRORDESC = CONCAT(ERRORDESC,'GROUPNAME is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODATTRGRP
	WHERE 
		GROUPNAME= '' or GROUPNAME is null

UPDATE PWC_E_PRODATTRGRP 
	SET ERRORDESC = CONCAT(ERRORDESC,'GROUPNAME,DATAAREAID has duplicate values','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Constraint', '; ')
	FROM PWC_E_PRODATTRGRP
	WHERE 
		GROUPNAME IS NOT NULL AND DATAAREAID IS NOT NULL AND
		CONCAT(GROUPNAME,DATAAREAID) IN 
		(SELECT CONCAT(GROUPNAME,DATAAREAID) FROM PWC_E_PRODATTRGRP
		GROUP BY GROUPNAME,DATAAREAID HAVING COUNT(*)>1)




Product Attribute Group Attribute Assignment----


UPDATE PWC_E_PRODATTRGRPATTRSSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTATTRIBUTEGROUPNAME is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODATTRGRPATTRSSIGN
	WHERE 
		PRODUCTATTRIBUTEGROUPNAME= '' or PRODUCTATTRIBUTEGROUPNAME is null

UPDATE PWC_E_PRODATTRGRPATTRSSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTATTRIBUTENAME is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODATTRGRPATTRSSIGN
	WHERE 
		PRODUCTATTRIBUTENAME= '' or PRODUCTATTRIBUTENAME is null

UPDATE PWC_E_PRODATTRGRPATTRSSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTATTRIBUTETYPENAME is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODATTRGRPATTRSSIGN
	WHERE 
		PRODUCTATTRIBUTETYPENAME= '' or PRODUCTATTRIBUTETYPENAME is null

UPDATE PWC_E_PRODATTRGRPATTRSSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTATTRIBUTEGROUPNAME,PRODUCTATTRIBUTENAME,PRODUCTATTRIBUTETYPENAME,DATAAREAID has duplicate values','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Constraint', '; ')
	FROM PWC_E_PRODATTRGRPATTRSSIGN
	WHERE 
		PRODUCTATTRIBUTEGROUPNAME IS NOT NULL AND PRODUCTATTRIBUTENAME IS NOT NULL AND PRODUCTATTRIBUTETYPENAME IS NOT NULL AND DATAAREAID IS NOT NULL AND CONCAT(PRODUCTATTRIBUTEGROUPNAME,PRODUCTATTRIBUTENAME,PRODUCTATTRIBUTETYPENAME,DATAAREAID) IN 
		(SELECT CONCAT(PRODUCTATTRIBUTEGROUPNAME,PRODUCTATTRIBUTENAME,PRODUCTATTRIBUTETYPENAME,DATAAREAID) FROM PWC_E_PRODATTRGRPATTRSSIGN
		GROUP BY PRODUCTATTRIBUTEGROUPNAME,PRODUCTATTRIBUTENAME,PRODUCTATTRIBUTETYPENAME,DATAAREAID HAVING COUNT(*)>1)


UPDATE PWC_E_PRODATTRGRPATTRSSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTATTRIBUTEGROUPNAME is not there in GROUPNAME of Attribute Groups','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODATTRGRPATTRSSIGN A
	WHERE 
		PRODUCTATTRIBUTEGROUPNAME IS NOT NULL AND PRODUCTATTRIBUTEGROUPNAME NOT IN 
		(SELECT B.GROUPNAME FROM PWC_E_PRODATTRGRP B WHERE (B.DATAAREAID = A.DATAAREAID OR UPPER(A.DATAAREAID) = 'GLOBAL' OR UPPER(B.DATAAREAID) = 'GLOBAL') AND B.GROUPNAME IS NOT NULL)

UPDATE PWC_E_PRODATTRGRPATTRSSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTATTRIBUTETYPENAME is not there in ENUMERATIONNAME of Product Atribute Enum Types','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODATTRGRPATTRSSIGN A
	WHERE 
		PRODUCTATTRIBUTETYPENAME IS NOT NULL AND PRODUCTATTRIBUTETYPENAME NOT IN 
		(SELECT B.ENUMERATIONNAME FROM PWC_E_PRODATTRENUMTYPE B WHERE (B.DATAAREAID = A.DATAAREAID OR UPPER(A.DATAAREAID) = 'GLOBAL' OR UPPER(B.DATAAREAID) = 'GLOBAL') AND B.ENUMERATIONNAME IS NOT NULL)

UPDATE PWC_E_PRODATTRGRPATTRSSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTATTRIBUTENAME is not there in ENUMERATIONNAME of Product Atribute Enum Types','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODATTRGRPATTRSSIGN A
	WHERE 
		PRODUCTATTRIBUTENAME IS NOT NULL AND PRODUCTATTRIBUTENAME NOT IN 
		(SELECT B.ATTRIBUTENAME FROM PWC_E_PRODUCTATTRIBUTES B WHERE (B.DATAAREAID = A.DATAAREAID OR UPPER(A.DATAAREAID) = 'GLOBAL' OR UPPER(B.DATAAREAID) = 'GLOBAL') AND B.ENUMERATIONNAME IS NOT NULL)
















ProductÂ  category product attribute group assignments----



UPDATE PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTCATEGORYHIERARCHYNAME is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	WHERE 
		PRODUCTCATEGORYHIERARCHYNAME= '' or PRODUCTCATEGORYHIERARCHYNAME is null


UPDATE PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTCATEGORYNAME is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	WHERE 
		PRODUCTCATEGORYNAME= '' or PRODUCTCATEGORYNAME is null


UPDATE PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTATTRIBUTEGROUPNAME is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	WHERE 
		PRODUCTATTRIBUTEGROUPNAME= '' or PRODUCTATTRIBUTEGROUPNAME is null

UPDATE PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'RETAILCHANNELNAVIGATIONATTRIBUTEGROUPTYPE is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Warning', '; ')
	FROM PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	WHERE 
		RETAILCHANNELNAVIGATIONATTRIBUTEGROUPTYPE= '' or RETAILCHANNELNAVIGATIONATTRIBUTEGROUPTYPE is null

UPDATE PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTATTRIBUTEGROUPDISPLAYORDER is blank','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Warning', '; ')
	FROM PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	WHERE 
		PRODUCTATTRIBUTEGROUPDISPLAYORDER= '' or PRODUCTATTRIBUTEGROUPDISPLAYORDER is null

UPDATE PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTCATEGORYHIERARCHYNAME,PRODUCTCATEGORYNAME,PRODUCTATTRIBUTEGROUPNAME,DATAAREAID has duplicate values','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Constraint', '; ')
	FROM PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	WHERE 
		PRODUCTCATEGORYHIERARCHYNAME IS NOT NULL AND PRODUCTCATEGORYNAME IS NOT NULL AND PRODUCTATTRIBUTEGROUPNAME IS NOT NULL AND DATAAREAID IS NOT NULL AND CONCAT(PRODUCTCATEGORYHIERARCHYNAME,PRODUCTCATEGORYNAME,PRODUCTATTRIBUTEGROUPNAME,DATAAREAID) IN 
		(SELECT CONCAT(PRODUCTCATEGORYHIERARCHYNAME,PRODUCTCATEGORYNAME,PRODUCTATTRIBUTEGROUPNAME,DATAAREAID) FROM PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
		GROUP BY PRODUCTCATEGORYHIERARCHYNAME,PRODUCTCATEGORYNAME,PRODUCTATTRIBUTEGROUPNAME,DATAAREAID HAVING COUNT(*)>1)


UPDATE PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTCATEGORYHIERARCHYNAME is not there in HierarchyName of Product Category Hierarchies','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODCATEGORYPRODATTRGRPASSIGN A
	WHERE 
		PRODUCTCATEGORYHIERARCHYNAME IS NOT NULL AND PRODUCTCATEGORYHIERARCHYNAME NOT IN 
		(SELECT B.HierarchyName FROM PWC_E_PRODCATHIERARCHY B WHERE (B.DATAAREAID = A.DATAAREAID OR UPPER(A.DATAAREAID) = 'GLOBAL' OR UPPER(B.DATAAREAID) = 'GLOBAL') AND B.HierarchyName IS NOT NULL)

UPDATE PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTCATEGORYNAME is not there in CategoryName of Product Categories','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODCATEGORYPRODATTRGRPASSIGN A
	WHERE 
		PRODUCTCATEGORYNAME IS NOT NULL AND PRODUCTCATEGORYNAME NOT IN 
		(SELECT B.CategoryName FROM PWC_E_PRODUCTCATEGORYSTAGING B WHERE (B.DATAAREAID = A.DATAAREAID OR UPPER(A.DATAAREAID) = 'GLOBAL' OR UPPER(B.DATAAREAID) = 'GLOBAL') AND B.CategoryName IS NOT NULL)

UPDATE PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTATTRIBUTEGROUPNAME is not there in GROUPNAME of Attribute Groups','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODCATEGORYPRODATTRGRPASSIGN A
	WHERE 
		PRODUCTATTRIBUTEGROUPNAME IS NOT NULL AND PRODUCTATTRIBUTEGROUPNAME NOT IN 
		(SELECT B.GROUPNAME FROM PWC_E_PRODATTRGRP B WHERE (B.DATAAREAID = A.DATAAREAID OR UPPER(A.DATAAREAID) = 'GLOBAL' OR UPPER(B.DATAAREAID) = 'GLOBAL') AND B.GROUPNAME IS NOT NULL)

UPDATE PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'RETAILCHANNELNAVIGATIONATTRIBUTEGROUPTYPE enum has invalid enum values','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	WHERE 
		RETAILCHANNELNAVIGATIONATTRIBUTEGROUPTYPE IS NOT NULL AND RETAILCHANNELNAVIGATIONATTRIBUTEGROUPTYPE NOT IN
		(SELECT MEMBERNAME FROM RETAILENUMVALUETABLE WHERE ENUMNAME LIKE 'RetailAttributeGroupType')

UPDATE PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	SET ERRORDESC = CONCAT(ERRORDESC,'PRODUCTCATEGORYHIERARCHYNAME,PRODUCTCATEGORYNAME,DATAAREAID is not matching with the Product Categories table','; ')
	,ERRORSTATUS = CONCAT(ERRORSTATUS, 'Error', '; ')
	FROM PWC_E_PRODCATEGORYPRODATTRGRPASSIGN
	WHERE
		PRODUCTCATEGORYHIERARCHYNAME IS NOT NULL AND
		PRODUCTCATEGORYNAME IS NOT NULL AND
		DATAAREAID IS NOT NULL AND
		CONCAT(PRODUCTCATEGORYHIERARCHYNAME,PRODUCTCATEGORYNAME,DATAAREAID) NOT IN 
		(SELECT CONCAT(PRODUCTCATEGORYHIERARCHYNAME,PRODUCTCATEGORYNAME,DATAAREAID) FROM PWC_E_PRODUCTCATEGORYSTAGING)
	


